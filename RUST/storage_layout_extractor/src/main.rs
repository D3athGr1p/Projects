mod common;
use storage_layout_extractor::watchdog::LazyWatchdog;

fn main() {
    let bytecode = "0x60806040526004361015610011575f80fd5b5f3560e01c806301e3366714610104578063258ae582146100ff5780632f4ea5ea146100fa5780633af2fb95146100f55780634782f779146100f0578063619a6927146100eb57806363b5a882146100e6578063715018a6146100e15780638c4db025146100dc5780638da5cb5b146100d75780639797dfad146100d2578063ac89dd34146100cd578063c4d66de8146100c8578063f2fde38b146100c35763f57ce651146100be575f80fd5b6108af565b61081d565b6106f4565b6106cc565b610658565b610624565b61057e565b610512565b6104a3565b61046b565b610384565b6102f7565b6102d1565b610281565b610123565b600435906001600160a01b038216820361011f57565b5f80fd5b3461011f57606036600319011261011f5761013c610109565b6001600160a01b0390602435828116810361011f5761018b7f9197dff006c93a9d847b21ecf1c111e402b0580814bf61b996e081e7a70dce4693604435928391610184610a2a565b851661135a565b604080516001600160a01b0393909316835260208301919091524290820152606090a1602060405160018152f35b634e487b7160e01b5f52604160045260245ffd5b6060810190811067ffffffffffffffff8211176101e957604052565b6101b9565b90601f8019910116810190811067ffffffffffffffff8211176101e957604052565b6040519061021d826101cd565b565b67ffffffffffffffff81116101e957601f01601f191660200190565b81601f8201121561011f578035906102528261021f565b9261026060405194856101ee565b8284526020838301011161011f57815f926020809301838601378301015290565b3461011f57604036600319011261011f5760243567ffffffffffffffff811161011f576102bf6102b7602092369060040161023b565b600435610905565b6040516001600160a01b039091168152f35b3461011f57602036600319011261011f5760206102ef600435610987565b604051908152f35b3461011f5761016036600319011261011f5767ffffffffffffffff6101243581811161011f5761032b90369060040161023b565b906101443590811161011f576103809161034c61036e92369060040161023b565b906101043560e43560c43560a435608435606435604435602435600435610bdb565b60405190151581529081906020820190565b0390f35b3461011f57604036600319011261011f5761039d610109565b602435906103a9610a2a565b47821161041a575f808084819482908215610410575b6001600160a01b031690f11561040b57604080519182524260208301527ff092eba34c6988e92246dc3b8e784c2264856a675e659f205c5d9e2c789e1e5c91a160405160018152602090f35b6108fa565b6108fc91506103bf565b60405162461bcd60e51b8152602060048201526024808201527f436f6e747261637420646f6573206e6f7420686f6c642074686973206d7563686044820152630408aa8960e31b6064820152608490fd5b3461011f57602036600319011261011f576001600160a01b0361048c610109565b165f526008602052602060405f2054604051908152f35b3461011f5761012036600319011261011f5767ffffffffffffffff60e43581811161011f576104d690369060040161023b565b906101043590811161011f57610380916104f761036e92369060040161023b565b9060c43560a4356084356064356044356024356004356113c6565b3461011f575f8060031936011261057b5761052b610a2a565b5f805160206116ae83398151915280546001600160a01b0319811690915581906001600160a01b03167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a380f35b80fd5b3461011f57602036600319011261011f5761038061059a610109565b60405f8180516105a9816101cd565b828152826020820152015260018060a01b038092165f52600560205260026105d3825f2054610a62565b508251936105e0856101cd565b815416845260018101546020850152015481830152519182918281516001600160a01b03168152602080830151908201526040918201519181019190915260600190565b3461011f575f36600319011261011f575f805160206116ae833981519152546040516001600160a01b039091168152602090f35b3461011f57602036600319011261011f57610671610109565b610679610a2a565b600254604080516001600160a01b03808416825290931660208401819052927feeb293e1f8f3a9db91ade748726387ed1352ca78f5430c5f06fe3d1e1ad505799190a16001600160a01b03191617600255005b3461011f575f36600319011261011f576002546040516001600160a01b039091168152602090f35b3461011f57602036600319011261011f5761070d610109565b5f805160206116ee833981519152549067ffffffffffffffff60ff8360401c1615921680159081610815575b600114908161080b575b159081610802575b506107f0575f805160206116ee833981519152805467ffffffffffffffff1916600117905561077e90826107cc57610aaf565b61078457005b5f805160206116ee833981519152805460ff60401b19169055604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d290602090a1005b5f805160206116ee833981519152805460ff60401b1916600160401b179055610aaf565b60405163f92ee8a960e01b8152600490fd5b9050155f61074b565b303b159150610743565b839150610739565b3461011f57602036600319011261011f57610836610109565b61083e610a2a565b6001600160a01b03908116908115610897575f805160206116ae83398151915280546001600160a01b031981168417909155167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e05f80a3005b604051631e4fbdf760e01b81525f6004820152602490fd5b3461011f5760c036600319011261011f5760206102ef6108cd610109565b60a43590608435906064359060443590602435906109ca565b634e487b7160e01b5f52601160045260245ffd5b6040513d5f823e3d90fd5b5f9060208301519160606040850151940151901a601b8110610975575b60ff1690601b8214158061096a575b610962576020935f93608093604051938452868401526040830152606082015282805260015afa1561040b575f5190565b505050505f90565b50601c821415610931565b601b0160ff811115610922575b6108e6565b60405160208101917f19457468657265756d205369676e6564204d6573736167653a0a3332000000008352603c820152603c81526109c4816101cd565b51902090565b94929093916040519460208601966bffffffffffffffffffffffff199060601b168752603486015260548501526074840152609483015260b482015260b4815260e0810181811067ffffffffffffffff8211176101e95760405251902090565b5f805160206116ae833981519152546001600160a01b03163303610a4a57565b60405163118cdaa760e01b8152336004820152602490fd5b600154811015610a9b5760039060015f52027fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf601905f90565b634e487b7160e01b5f52603260045260245ffd5b7396896c8a013031c50f336aca7bd0bc295b06876e90610acd610bad565b610ad5610bad565b5f805160206116ae83398151915280546001600160a01b0319808216734c993403113f65fbe75b07f8f0ace44d6418132e908117909355926001600160a01b0392909183167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e05f80a316815f5416175f5573c6d7881864d958fd400d611b38524f0a91c822868160025416176002557351077b3d4b71542d232607d13585c5c79640978a8160035416176003556004541617600455600154600160401b8110156101e957806001610ba99201600155610a62565b5050565b60ff5f805160206116ee8339815191525460401c1615610bc957565b604051631afcd79f60e31b8152600490fd5b9799909895875f52600760205260ff60405f205416610f6b57804211610f5957335f52600860205260405f20548b10610f4757610c69918b610c65928a610c54888f8f610c4f610c4f928c92600454610c3a60ff8260a01c1615610f7d565b60ff60a01b1916600160a01b17600455610fef565b610fef565b610c5e8b8b610fef565b9033611393565b1590565b610f35577f3e8ab1c598785c4f55e7527a3e4b8eb2883ae615d6b544f7717c7839a8fa4e4898610cb4610ca7610dba985f52600760205260405f2090565b805460ff19166001179055565b335f90815260086020526040902055610cdb610cd489610c4f8a87610fef565b3033611178565b5086610eed575b87610ea5575b80610e88575b81610e6b575b335f90815260056020526040902054610dd4577fa5a59d8f0d1b79ec2fff7d93e2a1d8ee6b4f758253d79796cde1ec9c2af996b185610d31610210565b338152426020820152866040820152610d4981611078565b610d9a610d576001546110e5565b335f908152600560205260409020819055610d7b33915f52600660205260405f2090565b80546001600160a01b0319166001600160a01b03909216919091179055565b610daa60405192839233846110f3565b0390a15b6040519788978861113a565b0390a16004805460ff60a01b19169055600190565b600190565b335f9081526005602052604090208490600290610df2905b54610a62565b500155335f908152600560205260409020610e0c90610dec565b506001429101557fa5a59d8f0d1b79ec2fff7d93e2a1d8ee6b4f758253d79796cde1ec9c2af996b185610e52610dec3360018060a01b03165f52600560205260405f2090565b50610e63604051928392338461103a565b0390a1610dae565b600454610e829083906001600160a01b0316611348565b50610cf4565b600354610e9f9082906001600160a01b0316611348565b50610cee565b600454610ebc9089906001600160a01b0316611348565b50600454604080516001600160a01b039092168252602082018a90525f805160206116ce83398151915291a1610ce8565b600354610f049088906001600160a01b0316611348565b50600354604080516001600160a01b039092168252602082018990525f805160206116ce83398151915291a1610ce2565b604051632057875960e21b8152600490fd5b60405163dadca68160e01b8152600490fd5b6040516317f8b7a960e01b8152600490fd5b604051638baf37b960e01b8152600490fd5b15610f8457565b60405162461bcd60e51b815260206004820152603960248201527f4e6f2072652d656e7472616e63793a20546869732077696c6c2070726576656e60448201527f7420646f696e67205265656e7472616e63792061747461636b000000000000006064820152608490fd5b9190820180921161098257565b91908251928382525f5b848110611026575050825f602080949584010152601f8019910116010190565b602081830181015184830182015201611006565b6002611075949360a093600180861b038091168452815416602084015260018101546040840152015460608201528160808201520190610ffc565b90565b600154600160401b8110156101e9578060016110979201600155610a62565b9190916110d257805182546001600160a01b0319166001600160a01b0391909116178255600290604090602081015160018501550151910155565b634e487b7160e01b5f525f60045260245ffd5b5f1981019190821161098257565b61112d611075949360a093600180861b0316835260208301906040809160018060a01b038151168452602081015160208501520151910152565b8160808201520190610ffc565b949290916110759796949260018752602087015260408601526060850152608084015260a083015260c0820152610100908160e08201520190610ffc565b5f546040516323b872dd60e01b60208201526001600160a01b0383811660248301528481166044830152606482018690527ff1444b5cad7ce70cb018d1b8edc8618fe303f3c7f034d8d572a6e27facbf2bef9561121e9390926111f4929091166111ef82608481015b03601f1981018452836101ee565b61123e565b604080516001600160a01b0394851681529490931660208501529183019190915281906060820190565b0390a1600190565b9081602091031261011f5751801515810361011f5790565b5f806112869260018060a01b03169360208151910182865af13d156112dd573d906112688261021f565b9161127660405193846101ee565b82523d5f602084013e5b836112e5565b80519081151591826112bf575b505061129c5750565b604051635274afe760e01b81526001600160a01b03919091166004820152602490fd5b6112d6925090602080610c65938301019101611226565b5f80611293565b606090611280565b9061130c57508051156112fa57805190602001fd5b604051630a12f52160e11b8152600490fd5b8151158061133f575b61131d575090565b604051639996b31560e01b81526001600160a01b039091166004820152602490fd5b50803b15611315565b5f54610dcf9291906001600160a01b03165b60405163a9059cbb60e01b60208201526001600160a01b039092166024830152604482019290925261021d916111ef82606481016111e1565b926113ad94916113b29796936113a8956109ca565b610987565b610905565b6002546001600160a01b0391821691161490565b95909694989791929398805f52600760205260409260ff845f20541661165f5760049a8b546113fb60ff8260a01c1615610f7d565b60ff60a01b1916600160a01b178c55335f908152600860205285902054841061164f5780421161163f576114439184610c6592856114398e8e610fef565b610c5e8c8c610fef565b61162f5798610dba9594939291611487610ca77f3e8ab1c598785c4f55e7527a3e4b8eb2883ae615d6b544f7717c7839a8fa4e489b9c5f52600760205260405f2090565b335f90815260086020526040902055866115e6575b878061158c575b505081611544575b335f90815260056020526040902083906002906114c790610dec565b500155335f9081526005602052604090206114e190610dec565b506001429101557fa5a59d8f0d1b79ec2fff7d93e2a1d8ee6b4f758253d79796cde1ec9c2af996b184611527610dec3360018060a01b03165f52600560205260405f2090565b506115378451928392338461103a565b0390a15195869586611670565b61154e8233611348565b508051338152602081018390524260408201527f9197dff006c93a9d847b21ecf1c111e402b0580814bf61b996e081e7a70dce4690606090a16114ab565b81545f805160206116ce833981519152926115c3916115b59084906001600160a01b0316611348565b50546001600160a01b031690565b83516001600160a01b039190911681526020810191909152604090a15f876114a3565b6003546115fd9088906001600160a01b0316611348565b5060035482516001600160a01b039091168152602081018890525f805160206116ce83398151915290604090a161149c565b8251632057875960e21b81528a90fd5b84516317f8b7a960e01b81528c90fd5b845163dadca68160e01b81528c90fd5b8351638baf37b960e01b8152600490fd5b9290916110759594925f85525f60208601525f60408601526060850152608084015260a083015260c0820152610100908160e08201520190610ffc56fe9016d09d72d40fdae2fd8ceac6b6234c7706214fd39c1cd1e609a0528c1993002604fdad714a10fb8b95e0f03397e449f85ee9df88bd145ca531f15b8350fb57f0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00a26469706673582212204a6251b6ad936147c333d2970f1284c27a2aae12810362e32ee1717608da36a164736f6c63430008140033";

    let extractor = common::new_extractor_from_bytecode(bytecode, LazyWatchdog.in_rc()).unwrap();

    let layout = extractor.analyze().unwrap();

    println!("{:?}", layout);
}
